<div class="card">
  <div>
    <i class="fa fa-times" aria-hidden="true" (click)="activeModal.dismiss('Cross click')"
     style="float: right; color: red; padding: 10px 10px 0px 0px; cursor: pointer;"></i>
  </div>
  <div class="container-fluid">
      <div class="row mt-1">
          <div class="col-md-1" style="text-align: right;">
              <img src="../../../assets/img/logo.png" alt="Dr Desh" class="logo-img">
          </div>
          <div class="col-md-5 mt-2">
              <h3 class="card-title">Facility Practice Performance Report</h3>
              <div  style="font-weight: 700;">From - {{dateFrom | date:'MM-dd-yyyy'}} &nbsp; &nbsp; To - {{dateTo | date:'MM-dd-yyyy'}}</div>
          </div>
          <div class="col-md-2 offset-md-2 mt-3">
            <button class="btn btn-custom" (click)="exportExcel('Provider_Performance_Report.xlsx', 'Provider Performance Report')">Download Excel</button>
            <button class="btn btn-custom mt-1" (click)="createPdf()">Download PDF</button>
          </div>
      </div>
  </div>
  <div id="excel-table">
<div *ngFor="let data of report" id="excel-table" style="width: 100%;">
  <label class="mt-2">Facility - {{data.facility}}</label>
<table class="table table-bordered" >
  <thead>
      <tr>
          <th>Provider</th>
          <th>Patients Encounters</th>
          <th>Assessed Capacity</th>
          <th>Changed Diagnosis</th>
          <th>Dementia Test Performed</th>
          <th>Did Psychotherapy</th>
          <th>Discharged Pt</th>
          <th>Failed GDR</th>
          <th>Did GDR</th>
          <th>Identified New Trauma</th>
          <th>Initiated Prior Auth</th>
          <th>No GDR</th>
          <th>Ordered Labs</th>
          <th>Psychological Test Performed</th>
          <th>Refer Pt To</th>
          <th>Decrease Med</th>
          <th>Effective GDR</th>
          <th>Increase Med</th>
          <th>Points</th>
          <th>Start Med</th>
          <th>Stop Meds</th>
      </tr>
  </thead>
  <tbody>
      <tr *ngFor="let d of data.provider | filter:searchTerm | paginate : { itemsPerPage:25, currentPage:pageNo}">
          <td>{{d.providerName}}</td>
          <td>{{d.patientsEncounters}}</td>
          <td>{{d.Assessedcapacity}}</td>
          <td>{{d.Changeddiagnosis}}</td>
          <td>{{d.Dementiatestperformed}}</td>
          <td>{{d.Didpsychotherapy}}</td>
          <td>{{d.Dischargedpt}}</td>
          <td>{{d.FailedGDR}}</td>
          <td>{{d.DidGDR}}</td>
          <td>{{d.Identifiednewtrauma}}</td>
          <td>{{d.Initiatedpriorauth}}</td>
          <td>{{d.NoGDR}}</td>
          <td>{{d.Orderedlabs}}</td>
          <td>{{d.Psychologicaltestperformed}}</td>
          <td>{{d.Referptto}}</td>
          <td>{{d.decreasemed}}</td>
          <td>{{d.effectiveGDR}}</td>
          <td>{{d.increasemed}}</td>
          <td>{{d.points}}</td>
          <td>{{d.startmed}}</td>
          <td>{{d.stopmeds}}</td>
      </tr>
  </tbody>
  <!-- <pagination-controls (pageChange)="pageNo = $event"></pagination-controls> -->
</table>
</div>
</div>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-6" *ngFor="let data of finalGraph">
      <div class="graphBox mt-2">
        <div class="graphHeading">Facility - {{data.facility | uppercase}}</div>
        <div class="chart-wrapper">
          <canvas baseChart [datasets]="data.d" [labels]="barChartLabels" [options]="barChartOptions"
            [plugins]="barChartPlugins" [legend]="barChartLegend" [chartType]="barChartType">
          </canvas>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
